language: node_js
services:
  - docker
sudo: required
dist: xenial

addons:
  homebrew:
    packages:
      - ninja
      - libetpan
      - openssl
      - coreutils

os:
  - osx
  - linux

node_js:
  - 10

env:
  global:
    - DOCKER_IMAGE=deltachat/travis-dc-node-base:latest

  matrix:
    - DC_CORE_VERSION="master"

before_install:
  - ./scripts/ci-prelude.sh

install:
  - ./scripts/ci-build.sh

script:
  - ./scripts/ci-test.sh

notifications:
  email: false
